!function(){function t(t){if(!t)return"";var e=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");return e?"?"+e:""}function e(t,e){return Object.prototype.toString.call(t).replace(/\[object\s(\w+)\]/,"$1")===e}function r(){var t=Array.prototype.slice.call(arguments);return Object.assign.apply(Object,[{}].concat(t))}function n(r){var n=r.method.toUpperCase(),o=r.baseUrl,a=r.url,u=r.params;return a=o?o+"/"+a:a,r.url=a,r.method=n,"GET"===n?(r.url=a+t(u),void(r.params=null)):void(e(u,"Object")&&(r.params=JSON.stringify(u)))}function o(t){n(t);var e=t.method,r=t.params,o=t.url,a=t.timeout,u=t.onsuccess,s=t.onerror,i=t.ontimeout,c=new XMLHttpRequest;c.withCredentials=!0,c.timeout=a,c.open(e,o),c.onload=function(){c.status>=200&&c.status<300||304===c.status?u(c.responseText):s(c)},a&&i&&(c.ontimeout=function(){i(c)}),c.onerror=s,c.send(r)}function a(t,e){return e=e||{},{msg:t,status:e.status,statusText:e.statusText,responseURL:e.responseURL,timeout:e.timeout}}function i(t,e){var n=r(s,t),a=r(u,e),i=a.errorHandler,c=a.successHandler,l=a.timeoutHandler;return function(t){var e=r(n,t);return new Promise(function(t,n){var a=r(e,{onsuccess:function(e){c(e,t,n)},onerror:function(t){i(t,n)},ontimeout:function(t){l(t,n)}});o(a)})}}var u={successHandler:function(t,e,r){var n=null;try{n=JSON.parse(t)}catch(o){return void r(a("PARSE ERROR"))}e(n)},errorHandler:function(t,e){e(a("REQUEST ERROR",t))},timeoutHandler:function(t,e){e(a("TIMEOUT",t))}},s={baseUrl:"",timeout:0,method:"get"};i.util={serialize:t,isType:e,merge:r,fetcher:o},"object"==typeof exports?module.exports=i:window.Ereq=i}();